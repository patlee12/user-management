#!/usr/bin/env bash
set -euo pipefail

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Resolve paths
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT_DIR="$(cd "$SCRIPT_DIR/../../.." && pwd)"
ACME_DIR="$ROOT_DIR/docker/production/nginx/www/.well-known/acme-challenge"

# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
# Cleanup
# โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
if [[ -d "$ACME_DIR" ]]; then
  echo "๐งน Cleaning: $ACME_DIR"
  rm -rf "$ACME_DIR"/*
  echo "โ Challenge files cleaned."
else
  echo "โน๏ธ  ACME challenge directory not found: $ACME_DIR"
fi
